<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Photo Booth</title>
    <link rel="stylesheet" href="style.css" />
    <!-- Load p5.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    <!-- Load ml5.js -->
    <script src="https://unpkg.com/ml5@0.20.0-alpha.3/dist/ml5.min.js"></script>
  </head>
  <body>
    <!-- Desktop Background -->
    <div id="desktop">
      <!-- Menu Bar -->
      <div id="menubar">
        <div class="menubar-apple">&#63743;</div>
        <div class="menubar-item">File</div>
        <div class="menubar-item">Edit</div>
        <div class="menubar-item">View</div>
        <div class="menubar-item">Special</div>
        <div class="menubar-item">Help</div>
        <div class="menubar-spacer"></div>
        <div class="menubar-item" id="menubar-time"></div>
      </div>

      <!-- Photo Booth Window -->
      <div id="photobooth-window">
        <!-- Title Bar -->
        <div id="titlebar">
          <div class="window-controls">
            <button class="window-btn close" title="Close"></button>
            <button class="window-btn minimize" title="Minimize"></button>
            <button class="window-btn zoom" title="Zoom"></button>
          </div>
          <span class="window-title">Photo Booth</span>
        </div>

        <!-- Main Content -->
        <div id="window-content">
          <!-- Preview Area -->
          <div id="preview-container">
            <!-- Hidden p5 canvas for video capture -->
            <div id="p5-container"></div>

            <!-- 3x3 Filter Grid (classic Photo Booth style) -->
            <div id="filter-grid">
              <!-- Filter cells will be generated by JS -->
            </div>

            <!-- Single View (when a filter is selected for full view) -->
            <div id="single-view">
              <canvas id="main-canvas"></canvas>
            </div>

            <!-- Loading Overlay -->
            <div id="loading-overlay">
              <div class="spinner"></div>
              <span id="loading-message">Initializing camera...</span>
            </div>

            <!-- Flash Effect -->
            <div id="flash-overlay"></div>

            <!-- Countdown Overlay -->
            <div id="countdown-overlay" class="hidden">
              <span id="countdown-number"></span>
            </div>

            <!-- Status Indicators -->
            <div id="status-indicators" class="hidden">
              <div class="status-badge" id="hand-status">
                <span class="dot"></span>
                <span class="label">Hand: --</span>
              </div>
              <div class="status-badge" id="face-status">
                <span class="dot"></span>
                <span class="label">Face: --</span>
              </div>
            </div>

            <!-- Smile Indicator -->
            <div id="smile-indicator" class="hidden">
              <span class="emoji">üòÅ</span>
              <span class="text">Smile with teeth to capture</span>
            </div>
          </div>

          <!-- Page Dots -->
          <div id="page-dots">
            <span class="dot active"></span>
            <span class="dot"></span>
          </div>

          <!-- Control Strip -->
          <div id="control-strip">
            <!-- Left: Gallery & Timer -->
            <div class="control-group left">
              <button id="btn-gallery" class="mode-btn" title="Gallery">
                <!-- Grid icon -->
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <rect x="3" y="3" width="7" height="7" rx="1" />
                  <rect x="14" y="3" width="7" height="7" rx="1" />
                  <rect x="3" y="14" width="7" height="7" rx="1" />
                  <rect x="14" y="14" width="7" height="7" rx="1" />
                </svg>
              </button>
              <button id="btn-timer" class="mode-btn" title="Timer">
                <!-- Clock icon -->
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="9" />
                  <path d="M12 6v6l4 2" />
                </svg>
              </button>
            </div>

            <!-- Center: Capture Button -->
            <button
              id="btn-capture"
              class="capture-btn"
              title="Take Photo (Spacebar)"
            >
              <!-- Camera icon -->
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z" />
                <path
                  d="M20 4h-3.17L15 2H9L7.17 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm-8 13a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"
                />
              </svg>
            </button>

            <!-- Right: Effects Button -->
            <div class="control-group right">
              <button id="btn-effects" class="effects-btn" title="Effects (E)">
                Effects
              </button>
            </div>
          </div>

          <!-- Gallery Strip -->
          <div id="gallery-strip">
            <div id="gallery-items">
              <!-- Thumbnails will be generated by JS -->
            </div>
            <div id="gallery-empty">
              No photos yet. Smile or press spacebar to capture!
            </div>
          </div>
        </div>
      </div>

      <!-- Preview Modal -->
      <div id="preview-modal" class="hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
          <img id="modal-image" src="" alt="Preview" />
          <div class="modal-actions">
            <button id="btn-download" class="modal-btn">Download</button>
            <button id="btn-delete" class="modal-btn danger">Delete</button>
            <button id="btn-close-modal" class="modal-btn primary">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Application Scripts -->
    <script src="js/ml/hand.js"></script>
    <script src="js/ml/face.js"></script>
    <script src="js/photoboothSketch.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>

